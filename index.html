<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Experimento jsPsych simple</title>
  <link href="https://unpkg.com/jspsych@8.0.2/css/jspsych.css" rel="stylesheet" />
</head>
<body>
  <div id="jspsych-target"></div>

  <script src="https://unpkg.com/jspsych@8.0.2"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>

  <script>
    const jsPsych = initJsPsych({
      display_element: 'jspsych-target',
      on_finish: () => {
        const csvData = jsPsych.data.get().csv();

        // Mostrar los datos localmente
        // jsPsych.data.displayData();

        // Enviar datos al servidor (ajusta la URL)
        fetch('save_data.php', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({filedata: csvData})
        })
        .then(response => {
          if (!response.ok) {
            console.error('Error al enviar datos al servidor');
          } else {
            console.log('Datos guardados correctamente');
          }
        })
        .catch(error => console.error('Error en fetch:', error));
      }
    });

    const trial = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: '<p>Esta es una <span style="color:red;">palabra</span> coloreada.</p>',
      choices: ['r', 'n'],
      prompt: '<p>Presiona "r" o "n" para responder</p>',
      data: { prueba: 'palabra_coloreada' }
    };

    jsPsych.run([trial]);
  </script>
</body>
</html>


